<div class="prayer-times-page" dir="rtl">
    <div class="container">
        <!-- Header -->
        <div class="page-header fade-in-up">
            <h1 class="page-title">
                <span class="title-icon">๐</span>
                <span>ููุงููุช ุงูุตูุงุฉ ูุงููุฑุขู</span>
            </h1>
            <p class="page-subtitle">ุญุงูุธ ุนูู ุตูุงุชู ูู ููุชูุง</p>
        </div>

        <!-- Search Section -->
        <div class="search-section card glass-effect fade-in">
            <div class="input-group">
                <div class="input-wrapper">
                    <label for="country">ุงูุฏููุฉ</label>
                    <select id="country" [(ngModel)]="selectedCountry" (change)="onCountryChange()">
                        <option value="" disabled selected>ุงุฎุชุฑ ุงูุฏููุฉ</option>
                        <option *ngFor="let country of countries" [value]="country.country">
                            {{ country.country }}
                        </option>
                    </select>
                </div>
                <div class="input-wrapper">
                    <label for="city">ุงููุฏููุฉ</label>
                    <select id="city" [(ngModel)]="selectedCity" [disabled]="!selectedCountry">
                        <option value="" disabled selected>ุงุฎุชุฑ ุงููุฏููุฉ</option>
                        <option *ngFor="let city of cities" [value]="city">
                            {{ city }}
                        </option>
                    </select>
                </div>
                <button class="search-btn" (click)="getPrayerTimes()" [disabled]="loading || !selectedCity">
                    {{ loading ? 'ุฌุงุฑู ุงูุชุญููู...' : 'ุนุฑุถ ุงูููุงููุช' }}
                </button>
            </div>
            <div class="error-message" *ngIf="error">{{ error }}</div>
        </div>

        <!-- Date Display -->
        <div class="info-section fade-in" *ngIf="hijriDate">
            <div class="date-card card glass-effect">
                <div class="date-label">ุงูุชุงุฑูุฎ ุงููุฌุฑู</div>
                <div class="date-hijri">{{ hijriDate }}</div>
            </div>
        </div>

        <!-- Audio Player Section -->
        <div class="player-section fade-in-up">
            <!-- Show Button (Visible only when hidden) -->
            <div class="player-controls" *ngIf="!showPlayer">
                <button class="show-player-btn" (click)="togglePlayer()">
                    <span class="icon">๐</span> ุฅุธูุงุฑ ุงููุดุบู
                </button>
            </div>

            <!-- Player Card (Hidden via CSS to keep audio playing) -->
            <div class="audio-player card glass-effect" [style.display]="showPlayer ? 'block' : 'none'">
                <div class="player-header-row">
                    <div class="player-info">
                        <h3>ูุดุบู ุงููุฑุขู ุงููุฑูู</h3>
                        <span class="reciter">ุณูุฑุฉ ุงููุงุชุญุฉ</span>
                    </div>
                    <button class="hide-btn" (click)="togglePlayer()" title="ุฅุฎูุงุก">
                        โ
                    </button>
                </div>
                <audio controls [src]="audioSource" class="main-audio"></audio>
            </div>
        </div>

        <!-- Prayer Times Grid -->
        <div class="prayer-times-grid" *ngIf="prayerTimes.length > 0">
            <div *ngFor="let prayer of prayerTimes; let i = index" class="prayer-card card"
                [class.current]="getCurrentPrayer() === prayer.name" [style.animation-delay]="(i * 0.1) + 's'">
                <div class="prayer-icon">{{ prayer.icon }}</div>
                <div class="prayer-info">
                    <h3 class="prayer-name">{{ prayer.name }}</h3>
                    <div class="prayer-time">{{ prayer.time }}</div>
                </div>
                <div class="prayer-checkmark" *ngIf="getCurrentPrayer() === prayer.name">โ</div>
            </div>
        </div>

        <!-- Empty State / Note -->
        <div class="note-section fade-in" *ngIf="!loading && prayerTimes.length === 0 && !error">
            <div class="note card glass-effect">
                <div class="note-icon">๐ก</div>
                <p class="note-text">
                    ุงุฎุชุฑ ุฏููุชู ููุฏููุชู ูุนุฑุถ ููุงููุช ุงูุตูุงุฉ.
                </p>
            </div>
        </div>
    </div>
</div>